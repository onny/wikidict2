// MSDropDown - jquery.dd.js
// author: Marghoob Suleman - http://www.marghoobsuleman.com/
// Date: 10 Nov, 2012 
// Version: 3.5.2
// Revision: 27
// web: www.marghoobsuleman.com
/*
// msDropDown is free jQuery Plugin: you can redistribute it and/or modify
// it under the terms of the either the MIT License or the Gnu General Public License (GPL) Version 2
*/ 
var msBeautify=msBeautify||{}
!function($){function dd(element,settings){var settings=$.extend(!0,{byJson:{data:null,selectedIndex:0,name:null,size:0,multiple:!1,width:250},mainCSS:"dd",height:120,visibleRows:7,rowHeight:0,showIcon:!0,zIndex:9999,useSprite:!1,animStyle:"slideDown",event:"click",openDirection:"auto",jsonTitle:!0,style:"",disabledOpacity:.7,disabledOptionEvents:!0,childWidth:0,enableCheckbox:!1,checkboxNameSuffix:"_mscheck",append:"",prepend:"",reverseMode:!0,roundedCorner:!0,enableAutoFilter:!0,on:{create:null,open:null,close:null,add:null,remove:null,change:null,blur:null,click:null,dblclick:null,mousemove:null,mouseover:null,mouseout:null,focus:null,mousedown:null,mouseup:null}},settings),$this=this,holderId={postElementHolder:"_msddHolder",postID:"_msdd",postTitleID:"_title",postTitleTextID:"_titleText",postChildID:"_child"},css={dd:settings.mainCSS,ddTitle:"ddTitle",arrow:"ddArrow arrowoff",ddChild:"ddChild",ddTitleText:"ddTitleText",disabled:"disabled",enabled:"enabled",ddOutOfVision:"ddOutOfVision",borderTop:"borderTop",noBorderTop:"noBorderTop",selected:"selected",divider:"divider",optgroup:"optgroup",optgroupTitle:"optgroupTitle",description:"description",label:"ddlabel",hover:"hover",disabledAll:"disabledAll"},css_i={li:"_msddli_",borderRadiusTp:"borderRadiusTp",ddChildMore:"border shadow",fnone:"fnone"},isList=!1,isMultiple=!1,isDisabled=!1,cacheElement={},element,orginial={},isOpen=!1,DOWN_ARROW=40,UP_ARROW=38,LEFT_ARROW=37,RIGHT_ARROW=39,ESCAPE=27,ENTER=13,ALPHABETS_START=47,SHIFT=16,CONTROL=17,BACKSPACE=8,DELETE=46,shiftHolded=!1,controlHolded=!1,lastTarget=null,forcedTrigger=!1,oldSelected,isCreated=!1,doc=document,ua=window.navigator.userAgent,isIE=ua.match(/msie/i)
settings.reverseMode=""+settings.reverseMode,settings.roundedCorner=""+settings.roundedCorner
var isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)?!0:!1},msieversion=function(){var e=ua.indexOf("MSIE")
return e>0?parseInt(ua.substring(e+5,ua.indexOf(".",e))):0},checkDataSetting=function(){settings.mainCSS=$("#"+element).data("maincss")||settings.mainCSS,settings.visibleRows=$("#"+element).data("visiblerows")||settings.visibleRows,0==$("#"+element).data("showicon")&&(settings.showIcon=$("#"+element).data("showicon")),settings.useSprite=$("#"+element).data("usesprite")||settings.useSprite,settings.animStyle=$("#"+element).data("animstyle")||settings.animStyle,settings.event=$("#"+element).data("event")||settings.event,settings.openDirection=$("#"+element).data("opendirection")||settings.openDirection,settings.jsonTitle=$("#"+element).data("jsontitle")||settings.jsonTitle,settings.disabledOpacity=$("#"+element).data("disabledopacity")||settings.disabledOpacity,settings.childWidth=$("#"+element).data("childwidth")||settings.childWidth,settings.enableCheckbox=$("#"+element).data("enablecheckbox")||settings.enableCheckbox,settings.checkboxNameSuffix=$("#"+element).data("checkboxnamesuffix")||settings.checkboxNameSuffix,settings.append=$("#"+element).data("append")||settings.append,settings.prepend=$("#"+element).data("prepend")||settings.prepend,settings.reverseMode=$("#"+element).data("reversemode")||settings.reverseMode,settings.roundedCorner=$("#"+element).data("roundedcorner")||settings.roundedCorner,settings.enableAutoFilter=$("#"+element).data("enableautofilter")||settings.enableAutoFilter,settings.reverseMode=""+settings.reverseMode,settings.roundedCorner=""+settings.roundedCorner,settings.enableAutoFilter=""+settings.enableAutoFilter},getElement=function(e){return void 0===cacheElement[e]&&(cacheElement[e]=doc.getElementById(e)),cacheElement[e]},getIndex=function(e){var t=getPostID("postChildID")
return $("#"+t+" li."+css_i.li).index(e)},createByJson=function(){if(settings.byJson.data){var validData=["description","image","title"]
try{element.id||(element.id="dropdown"+msBeautify.counter),settings.byJson.data=eval(settings.byJson.data)
var id="msdropdown"+msBeautify.counter++,obj={}
obj.id=id,obj.name=settings.byJson.name||element.id,settings.byJson.size>0&&(obj.size=settings.byJson.size),obj.multiple=settings.byJson.multiple
for(var oSelect=createElement("select",obj),i=0;i<settings.byJson.data.length;i++){var current=settings.byJson.data[i],opt=new Option(current.text,current.value)
for(var p in current)if("text"!=p.toLowerCase()){var key=-1!=$.inArray(p.toLowerCase(),validData)?"data-":""
opt.setAttribute(key+p,current[p])}oSelect.options[i]=opt}getElement(element.id).appendChild(oSelect),oSelect.selectedIndex=settings.byJson.selectedIndex,$(oSelect).css({width:settings.byJson.width+"px"}),element=oSelect}catch(e){throw"There is an error in json data."}}},init=function(){createByJson(),element.id||(element.id="msdrpdd"+msBeautify.counter++),element=element.id,$this.element=element,checkDataSetting(),isDisabled=getElement(element).disabled
var e=settings.enableCheckbox
"true"==""+e&&(getElement(element).multiple=!0,settings.enableCheckbox=!0),isList=getElement(element).size>1||1==getElement(element).multiple?!0:!1,isList&&(isMultiple=getElement(element).multiple),mergeAllProp(),createLayout(),updateProp("uiData",getDataAndUI()),updateProp("selectedOptions",$("#"+element+" option:selected"))
var t=getPostID("postChildID")
oldSelected=$("#"+t+" li."+css.selected),"true"===settings.reverseMode&&$("#"+element).on("change",function(){setValue(this.selectedIndex)}),getElement(element).refresh=function(){$("#"+element).msDropdown().data("dd").refresh()}},getPostID=function(e){return element+holderId[e]},getInternalStyle=function(e){var t=void 0===e.style?"":e.style.cssText
return t},parseOption=function(opt){var imagePath="",title="",description="",value=-1,text="",className="",imagecss="",index
if(void 0!==opt){var attrTitle=opt.title||""
if(""!=attrTitle){var reg=/^\{.*\}$/,isJson=reg.test(attrTitle)
if(isJson&&settings.jsonTitle)var obj=eval("["+attrTitle+"]")
title=isJson&&settings.jsonTitle?obj[0].title:title,description=isJson&&settings.jsonTitle?obj[0].description:description,imagePath=isJson&&settings.jsonTitle?obj[0].image:attrTitle,imagecss=isJson&&settings.jsonTitle?obj[0].imagecss:imagecss,index=opt.index}text=opt.text||"",value=opt.value||"",className=opt.className||"",title=$(opt).prop("data-title")||$(opt).data("title")||title||"",description=$(opt).prop("data-description")||$(opt).data("description")||description||"",imagePath=$(opt).prop("data-image")||$(opt).data("image")||imagePath||"",imagecss=$(opt).prop("data-imagecss")||$(opt).data("imagecss")||imagecss||"",index=$(opt).index()}var o={image:imagePath,title:title,description:description,value:value,text:text,className:className,imagecss:imagecss,index:index}
return o},createElement=function(e,t,s){var n=doc.createElement(e)
if(t)for(var i in t)switch(i){case"style":n.style.cssText=t[i]
break
default:n[i]=t[i]}return s&&(n.innerHTML=s),n},hideOriginal=function(){var e=getPostID("postElementHolder")
if(0==$("#"+e).length){var t={style:"height: 0px;overflow: hidden;position: absolute;",className:css.ddOutOfVision}
t.id=e
var s=createElement("div",t)
$("#"+element).after(s),$("#"+element).appendTo($("#"+e))}else $("#"+e).css({height:0,overflow:"hidden",position:"absolute"})
getElement(element).tabIndex=-1},createWrapper=function(){var e="true"==settings.roundedCorner?" borderRadius":"",t={className:css.dd+" ddcommon"+e},s=getInternalStyle(getElement(element))
$("#"+element).outerWidth(),t.style="width: 100%;",s.length>0&&(t.style=t.style+""+s),t.id=getPostID("postID"),t.tabIndex=getElement(element).tabIndex
var n=createElement("div",t)
return n},createTitle=function(){var e
e=getElement(element).selectedIndex>=0?getElement(element).options[getElement(element).selectedIndex]:{value:"",text:""}
var t="",s="",n=$("#"+element).data("usesprite")
n&&(settings.useSprite=n),0!=settings.useSprite&&(t=" "+settings.useSprite,s=" "+e.className)
var i="true"==settings.roundedCorner?" "+css_i.borderRadiusTp:"",l=createElement("div",{className:css.ddTitle+t+i}),o=createElement("span",{className:css.divider}),a=createElement("span",{className:css.arrow}),d=getPostID("postTitleID"),r=createElement("span",{className:css.ddTitleText+s,id:d}),c=parseOption(e),p=c.image,u=c.text||""
if(""!=p&&settings.showIcon){var m=createElement("img")
m.src=p,""!=c.imagecss&&(m.className=c.imagecss+" ")}var g=createElement("span",{className:css.label},u)
l.appendChild(o),l.appendChild(a),m&&r.appendChild(m),r.appendChild(g),l.appendChild(r)
var h=createElement("span",{className:css.description},c.description)
return r.appendChild(h),l},createFilterBox=function(){var e=getPostID("postTitleTextID"),t="true"==settings.roundedCorner?"borderRadius":"",s=createElement("input",{id:e,type:"text",value:"",autocomplete:"off",className:"text shadow "+t,style:"display: none"})
return s},createChild=function(e){var t={},s=getInternalStyle(e)
s.length>0&&(t.style=s)
var n=e.disabled?css.disabled:css.enabled
n=e.selected?n+" "+css.selected:n,n=n+" "+css_i.li,t.className=n,0!=settings.useSprite&&(t.className=n+" "+e.className)
var i=createElement("li",t),l=parseOption(e)
""!=l.title&&(i.title=l.title)
var o=l.image
if(""!=o&&settings.showIcon){var a=createElement("img")
a.src=o,""!=l.imagecss&&(a.className=l.imagecss+" ")}if(""!=l.description)var d=createElement("span",{className:css.description},l.description)
var r=e.text||"",c=createElement("span",{className:css.label},r)
if(settings.enableCheckbox===!0){var p=createElement("input",{type:"checkbox",name:element+settings.checkboxNameSuffix+"[]",value:e.value||"",className:"checkbox"})
i.appendChild(p),settings.enableCheckbox===!0&&(p.checked=e.selected?!0:!1)}a&&i.appendChild(a),i.appendChild(c),d?i.appendChild(d):a&&(a.className=a.className+css_i.fnone)
var u=createElement("div",{className:"clear"})
return i.appendChild(u),i},createChildren=function(){var e=getPostID("postChildID"),t={className:css.ddChild+" ddchild_ "+css_i.ddChildMore,id:e}
t.style=0==isList?"z-index: "+settings.zIndex:"z-index:1"
var s=$("#"+element).data("childwidth")||settings.childWidth
s&&(t.style=(t.style||"")+";width:"+s)
var n=createElement("div",t),i=createElement("ul")
0!=settings.useSprite&&(i.className=settings.useSprite)
for(var l=getElement(element).children,o=0;o<l.length;o++){var a,d=l[o]
if("optgroup"==d.nodeName.toLowerCase()){a=createElement("li",{className:css.optgroup})
var r=createElement("span",{className:css.optgroupTitle},d.label)
a.appendChild(r)
for(var c=d.children,p=createElement("ul"),u=0;u<c.length;u++){var m=createChild(c[u])
p.appendChild(m)}a.appendChild(p)}else a=createChild(d)
i.appendChild(a)}return n.appendChild(i),n},childHeight=function(e){var t=getPostID("postChildID")
if(e)return-1==e?$("#"+t).css({height:"auto",overflow:"auto"}):$("#"+t).css("height",e+"px"),!1
var s,n=getElement(element).options.length
if(n>settings.visibleRows||settings.visibleRows){var i=$("#"+t+" li:first"),l=parseInt(i.css("padding-bottom"))+parseInt(i.css("padding-top"))
0===settings.rowHeight&&($("#"+t).css({visibility:"hidden",display:"block"}),settings.rowHeight=Math.ceil(i.height()),$("#"+t).css({visibility:"visible"}),isList&&settings.enableCheckbox!==!0||$("#"+t).css({display:"none"})),s=(settings.rowHeight+l)*Math.min(settings.visibleRows,n)+3}else isList&&(s=$("#"+element).height())
return s},applyChildEvents=function(){var e=getPostID("postChildID")
$("#"+e).on("click",function(e){return isDisabled===!0?!1:(e.preventDefault(),e.stopPropagation(),isList&&bind_on_events(),void 0)}),$("#"+e+" li."+css.enabled).on("click",function(e){"input"!==e.target.nodeName.toLowerCase()&&close(this)}),$("#"+e+" li."+css.enabled).on("mousedown",function(t){if(isDisabled===!0)return!1
if(oldSelected=$("#"+e+" li."+css.selected),lastTarget=this,t.preventDefault(),t.stopPropagation(),settings.enableCheckbox===!0&&"input"===t.target.nodeName.toLowerCase()&&(controlHolded=!0),isList===!0)if(isMultiple)if(shiftHolded===!0){$(this).addClass(css.selected)
var s=$("#"+e+" li."+css.selected),n=getIndex(this)
if(s.length>1){var i=$("#"+e+" li."+css_i.li),l=getIndex(s[0]),o=getIndex(s[1])
n>o&&(l=n,o+=1)
for(var a=Math.min(l,o);a<=Math.max(l,o);a++){var d=i[a]
$(d).hasClass(css.enabled)&&$(d).addClass(css.selected)}}}else if(controlHolded===!0){if($(this).toggleClass(css.selected),settings.enableCheckbox===!0){var r=this.childNodes[0]
r.checked=!r.checked}}else $("#"+e+" li."+css.selected).removeClass(css.selected),$("#"+e+" input:checkbox").prop("checked",!1),$(this).addClass(css.selected),settings.enableCheckbox===!0&&(this.childNodes[0].checked=!0)
else $("#"+e+" li."+css.selected).removeClass(css.selected),$(this).addClass(css.selected)
else $("#"+e+" li."+css.selected).removeClass(css.selected),$(this).addClass(css.selected)}),$("#"+e+" li."+css.enabled).on("mouseenter",function(e){return isDisabled===!0?!1:(e.preventDefault(),e.stopPropagation(),null!=lastTarget&&isMultiple&&($(this).addClass(css.selected),settings.enableCheckbox===!0&&(this.childNodes[0].checked=!0)),void 0)}),$("#"+e+" li."+css.enabled).on("mouseover",function(){return isDisabled===!0?!1:($(this).addClass(css.hover),void 0)}),$("#"+e+" li."+css.enabled).on("mouseout",function(){return isDisabled===!0?!1:($("#"+e+" li."+css.hover).removeClass(css.hover),void 0)}),$("#"+e+" li."+css.enabled).on("mouseup",function(t){if(isDisabled===!0)return!1
t.preventDefault(),t.stopPropagation(),settings.enableCheckbox===!0&&(controlHolded=!1)
var s=$("#"+e+" li."+css.selected).length
forcedTrigger=oldSelected.length!=s||0==s?!0:!1,fireAfterItemClicked(),unbind_on_events(),bind_on_events(),lastTarget=null}),0==settings.disabledOptionEvents&&($("#"+e+" li."+css_i.li).on("click",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"click"),void 0)}),$("#"+e+" li."+css_i.li).on("mouseenter",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"mouseenter"),void 0)}),$("#"+e+" li."+css_i.li).on("mouseover",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"mouseover"),void 0)}),$("#"+e+" li."+css_i.li).on("mouseout",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"mouseout"),void 0)}),$("#"+e+" li."+css_i.li).on("mousedown",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"mousedown"),void 0)}),$("#"+e+" li."+css_i.li).on("mouseup",function(){return isDisabled===!0?!1:(fireOptionEventIfExist(this,"mouseup"),void 0)}))},removeChildEvents=function(){var e=getPostID("postChildID")
$("#"+e).off("click"),$("#"+e+" li."+css.enabled).off("mouseenter"),$("#"+e+" li."+css.enabled).off("click"),$("#"+e+" li."+css.enabled).off("mouseover"),$("#"+e+" li."+css.enabled).off("mouseout"),$("#"+e+" li."+css.enabled).off("mousedown"),$("#"+e+" li."+css.enabled).off("mouseup")},triggerBypassingHandler=function(e,t,s){$("#"+e).off(t,s),$("#"+e).trigger(t),$("#"+e).on(t,s)},applyEvents=function(){var e=getPostID("postID"),t=getPostID("postTitleTextID")
getPostID("postChildID"),$("#"+e).on(settings.event,function(e){return isDisabled===!0?!1:(fireEventIfExist(settings.event),e.preventDefault(),e.stopPropagation(),open(e),void 0)}),$("#"+e).on("keydown",function(e){var t=e.which
!isOpen&&(t==ENTER||t==UP_ARROW||t==DOWN_ARROW||t==LEFT_ARROW||t==RIGHT_ARROW||t>=ALPHABETS_START&&!isList)&&(open(e),t>=ALPHABETS_START?showFilterBox():(e.preventDefault(),e.stopImmediatePropagation()))}),$("#"+e).on("focus",wrapperFocusHandler),$("#"+e).on("blur",wrapperBlurHandler),$("#"+t).on("blur",function(){triggerBypassingHandler(e,"focus",wrapperFocusHandler)}),applyChildEvents(),$("#"+e).on("dblclick",on_dblclick),$("#"+e).on("mousemove",on_mousemove),$("#"+e).on("mouseenter",on_mouseover),$("#"+e).on("mouseleave",on_mouseout),$("#"+e).on("mousedown",on_mousedown),$("#"+e).on("mouseup",on_mouseup)},wrapperFocusHandler=function(){fireEventIfExist("focus")},wrapperBlurHandler=function(){fireEventIfExist("blur")},fixedForList=function(){var e=getPostID("postID"),t=getPostID("postChildID")
if(isList===!0&&settings.enableCheckbox===!1)$("#"+e+" ."+css.ddTitle).hide(),$("#"+t).css({display:"block",position:"relative"})
else{settings.enableCheckbox===!1&&(isMultiple=!1),$("#"+e+" ."+css.ddTitle).show(),$("#"+t).css({display:"none",position:"absolute"})
var s=$("#"+t+" li."+css.selected)[0]
$("#"+t+" li."+css.selected).removeClass(css.selected)
var n=getIndex($(s).addClass(css.selected))
setValue(n)}childHeight(childHeight())},fixedForDisabled=function(){var e=getPostID("postID")
1==isDisabled?settings.disabledOpacity:1,isDisabled===!0?$("#"+e).addClass(css.disabledAll):$("#"+e).removeClass(css.disabledAll)},fixedSomeUI=function(){var e=getPostID("postTitleTextID")
"true"==settings.enableAutoFilter&&$("#"+e).on("keyup",applyFilters),fixedForList(),fixedForDisabled()},createLayout=function(){var e=createWrapper(),t=createTitle()
e.appendChild(t)
var s=createFilterBox()
e.appendChild(s)
var n=createChildren()
e.appendChild(n),$("#"+element).after(e),hideOriginal(),fixedSomeUI(),applyEvents()
var i=getPostID("postChildID")
""!=settings.append&&$("#"+i).append(settings.append),""!=settings.prepend&&$("#"+i).prepend(settings.prepend),"function"==typeof settings.on.create&&settings.on.create.apply($this,arguments)},selectUI_LI=function(e){function t(e){$($("#"+s+" li."+css_i.li)[e]).addClass(css.selected),settings.enableCheckbox===!0&&$($("#"+s+" li."+css_i.li)[e]).find("input.checkbox").prop("checked","checked")}var s=getPostID("postChildID")
if($("#"+s+" li."+css_i.li).removeClass(css.selected),settings.enableCheckbox===!0&&$("#"+s+" li."+css_i.li+" input.checkbox").prop("checked",!1),isArray(e)===!0)for(var n=0;n<e.length;n++)t(e[n])
else t(e)},selectMutipleOptions=function(e,t){for(var s=getPostID("postChildID"),n=e||$("#"+s+" li."+css.selected),i=0;i<n.length;i++){var l=t===!0?n[i]:getIndex(n[i])
getElement(element).options[l].selected="selected"}setValue(n)},fireAfterItemClicked=function(){var e=getPostID("postChildID"),t=$("#"+e+" li."+css.selected);(isMultiple&&(shiftHolded||controlHolded)||forcedTrigger)&&(getElement(element).selectedIndex=-1)
var s
if(0==t.length?s=-1:t.length>1?selectMutipleOptions(t):s=getIndex($("#"+e+" li."+css.selected)),(getElement(element).selectedIndex!=s||forcedTrigger)&&t.length<=1){if(forcedTrigger=!1,has_handler("change"),getElement(element).selectedIndex=s,setValue(s),"function"==typeof settings.on.change){var n=getDataAndUI()
settings.on.change(n.data,n.ui)}$("#"+element).trigger("change")}},setValue=function(e,t){if(void 0!==e){var s,n,i
if(-1==e)s=-1,n="",i="",updateTitleUI(-1)
else if("object"!=typeof e){var l=getElement(element).options[e]
getElement(element).selectedIndex=e,s=e,n=parseOption(l),i=e>=0?getElement(element).options[e].text:"",updateTitleUI(void 0,n),n=n.value}else s=t&&t.index||getElement(element).selectedIndex,n=t&&t.value||getElement(element).value,i=t&&t.text||getElement(element).options[getElement(element).selectedIndex].text||"",updateTitleUI(s)
updateProp("selectedIndex",s),updateProp("value",n),updateProp("selectedText",i),updateProp("children",getElement(element).children),updateProp("uiData",getDataAndUI()),updateProp("selectedOptions",$("#"+element+" option:selected"))}},has_handler=function(e){var t={byElement:!1,byJQuery:!1,hasEvent:!1},s=$("#"+element)
try{null!==s.prop("on"+e)&&(t.hasEvent=!0,t.byElement=!0)}catch(n){}var i
return i="function"==typeof $._data?$._data(s[0],"events"):s.data("events"),i&&i[e]&&(t.hasEvent=!0,t.byJQuery=!0),t},bind_on_events=function(){unbind_on_events(),$("body").on("click",close),$(document).on("keydown",on_keydown),$(document).on("keyup",on_keyup)},unbind_on_events=function(){$("body").off("click",close),$(document).off("keydown",on_keydown),$(document).off("keyup",on_keyup)},applyFilters=function(e){if(e.keyCode<ALPHABETS_START&&e.keyCode!=BACKSPACE&&e.keyCode!=DELETE)return!1
var t=getPostID("postChildID"),s=getPostID("postTitleTextID"),n=getElement(s).value
if(0==n.length)$("#"+t+" li:hidden").show(),childHeight(childHeight())
else{$("#"+t+" li").hide()
var i=$("#"+t+" li:Contains('"+n+"')").show()
$("#"+t+" li:visible").length<=settings.visibleRows&&childHeight(-1),(i.length>0&&!isList||!isMultiple)&&($("#"+t+" ."+css.selected).removeClass(css.selected),$(i[0]).addClass(css.selected))}isList||adjustOpen()},showFilterBox=function(){if("true"==settings.enableAutoFilter){var e=getPostID("postID"),t=getPostID("postTitleTextID")
$("#"+t+":hidden").length>0&&0==controlHolded&&($("#"+t+":hidden").show().val(""),triggerBypassingHandler(e,"blur",wrapperBlurHandler),getElement(t).focus())}},hideFilterBox=function(){var e=getPostID("postTitleTextID")
$("#"+e+":visible").length>0&&($("#"+e+":visible").hide(),getElement(e).blur())},on_keydown=function(e){getPostID("postTitleTextID")
var t=getPostID("postChildID")
switch(e.keyCode){case DOWN_ARROW:case RIGHT_ARROW:e.preventDefault(),e.stopPropagation(),next()
break
case UP_ARROW:case LEFT_ARROW:e.preventDefault(),e.stopPropagation(),previous()
break
case ESCAPE:case ENTER:e.preventDefault(),e.stopPropagation(),close()
var s=$("#"+t+" li."+css.selected).length
forcedTrigger=oldSelected.length!=s||0==s?!0:!1,fireAfterItemClicked(),unbind_on_events(),lastTarget=null
break
case SHIFT:shiftHolded=!0
break
case CONTROL:controlHolded=!0
break
default:e.keyCode>=ALPHABETS_START&&isList===!1&&showFilterBox()}return isDisabled===!0?!1:(fireEventIfExist("keydown"),void 0)},on_keyup=function(e){switch(e.keyCode){case SHIFT:shiftHolded=!1
break
case CONTROL:controlHolded=!1}return isDisabled===!0?!1:(fireEventIfExist("keyup"),void 0)},on_dblclick=function(){return isDisabled===!0?!1:(fireEventIfExist("dblclick"),void 0)},on_mousemove=function(){return isDisabled===!0?!1:(fireEventIfExist("mousemove"),void 0)},on_mouseover=function(e){return isDisabled===!0?!1:(e.preventDefault(),fireEventIfExist("mouseover"),void 0)},on_mouseout=function(e){return isDisabled===!0?!1:(e.preventDefault(),fireEventIfExist("mouseout"),void 0)},on_mousedown=function(){return isDisabled===!0?!1:(fireEventIfExist("mousedown"),void 0)},on_mouseup=function(){return isDisabled===!0?!1:(fireEventIfExist("mouseup"),void 0)},option_has_handler=function(e,t){var s={byElement:!1,byJQuery:!1,hasEvent:!1}
void 0!=$(e).prop("on"+t)&&(s.hasEvent=!0,s.byElement=!0)
var n=$(e).data("events")
return n&&n[t]&&(s.hasEvent=!0,s.byJQuery=!0),s},fireOptionEventIfExist=function(e,t){if(0==settings.disabledOptionEvents){var s=getElement(element).options[getIndex(e)]
if(option_has_handler(s,t).hasEvent===!0){if(option_has_handler(s,t).byElement===!0&&s["on"+t](),option_has_handler(s,t).byJQuery===!0)switch(t){case"keydown":case"keyup":break
default:$(s).trigger(t)}return!1}}},fireEventIfExist=function(e){if("function"==typeof settings.on[e]&&settings.on[e].apply(this,arguments),has_handler(e).hasEvent===!0){if(has_handler(e).byElement===!0)getElement(element)["on"+e]()
else if(has_handler(e).byJQuery===!0)switch(e){case"keydown":case"keyup":break
default:$("#"+element).triggerHandler(e)}return!1}},scrollToIfNeeded=function(e){var t=getPostID("postChildID")
if(e=void 0!==e?e:$("#"+t+" li."+css.selected),e.length>0){var s=parseInt($(e).position().top),n=parseInt($("#"+t).height())
if(s>n){var i=s+$("#"+t).scrollTop()-n/2
$("#"+t).animate({scrollTop:i},500)}}},next=function(){function e(t){return t+=1,t>s.length?t:$(s[t]).hasClass(css.enabled)===!0?t:t=e(t)}var t=getPostID("postChildID"),s=$("#"+t+" li:visible."+css_i.li),n=$("#"+t+" li:visible."+css.selected)
n=0==n.length?s[0]:n
var i=$("#"+t+" li:visible."+css_i.li).index(n)
i<s.length-1&&(i=e(i),i<s.length&&(shiftHolded&&isList&&isMultiple||$("#"+t+" ."+css.selected).removeClass(css.selected),$(s[i]).addClass(css.selected),updateTitleUI(i),1==isList&&fireAfterItemClicked(),scrollToIfNeeded($(s[i]))),isList||adjustOpen())},previous=function(){function e(t){return t-=1,0>t?t:$(n[t]).hasClass(css.enabled)===!0?t:t=e(t)}var t=getPostID("postChildID"),s=$("#"+t+" li:visible."+css.selected),n=$("#"+t+" li:visible."+css_i.li),i=$("#"+t+" li:visible."+css_i.li).index(s[0])
if(i>=0){if(i=e(i),i>=0&&(shiftHolded&&isList&&isMultiple||$("#"+t+" ."+css.selected).removeClass(css.selected),$(n[i]).addClass(css.selected),updateTitleUI(i),1==isList&&fireAfterItemClicked(),parseInt($(n[i]).position().top+$(n[i]).height())<=0)){var l=$("#"+t).scrollTop()-$("#"+t).height()-$(n[i]).height()
$("#"+t).animate({scrollTop:l},500)}isList||adjustOpen()}},adjustOpen=function(){var e=getPostID("postID"),t=getPostID("postChildID"),s=$("#"+e).offset(),n=$("#"+e).height(),i=$(window).height(),l=$(window).scrollTop(),o=$("#"+t).height(),a=$("#"+e).height(),d=settings.openDirection.toLowerCase()
if((i+l<Math.floor(o+n+s.top)||"alwaysup"==d)&&"alwaysdown"!=d){a=o,$("#"+t).css({top:"-"+a+"px",display:"block",zIndex:settings.zIndex}),"true"==settings.roundedCorner&&$("#"+e).removeClass("borderRadius borderRadiusTp").addClass("borderRadiusBtm")
var a=$("#"+t).offset().top;-10>a&&($("#"+t).css({top:parseInt($("#"+t).css("top"))-a+20+l+"px",zIndex:settings.zIndex}),"true"==settings.roundedCorner&&$("#"+e).removeClass("borderRadiusBtm borderRadiusTp").addClass("borderRadius"))}else $("#"+t).css({top:a+"px",zIndex:settings.zIndex}),"true"==settings.roundedCorner&&$("#"+e).removeClass("borderRadius borderRadiusBtm").addClass("borderRadiusTp")
isIE&&msieversion()<=7&&($("div.ddcommon").css("zIndex",settings.zIndex-10),$("#"+e).css("zIndex",settings.zIndex+5))},open=function(){if(isDisabled===!0)return!1
getPostID("postID")
var e=getPostID("postChildID")
if(isOpen)"mouseover"!==settings.event&&close()
else{isOpen=!0,""!=msBeautify.oldDiv&&$("#"+msBeautify.oldDiv).css({display:"none"}),msBeautify.oldDiv=e,$("#"+e+" li:hidden").show(),adjustOpen()
var t=settings.animStyle
if(""==t||"none"==t){if($("#"+e).css({display:"block"}),scrollToIfNeeded(),"function"==typeof settings.on.open){var s=getDataAndUI()
settings.on.open(s.data,s.ui)}}else $("#"+e)[t]("fast",function(){if(scrollToIfNeeded(),"function"==typeof settings.on.open){var e=getDataAndUI()
settings.on.open(e.data,e.ui)}})
bind_on_events()}},close=function(){isOpen=!1
var e=getPostID("postID"),t=getPostID("postChildID")
if((isList===!1||settings.enableCheckbox===!0)&&($("#"+t).css({display:"none"}),"true"==settings.roundedCorner&&$("#"+e).removeClass("borderRadiusTp borderRadiusBtm").addClass("borderRadius")),unbind_on_events(),"function"==typeof settings.on.close){var s=getDataAndUI()
settings.on.close(s.data,s.ui)}hideFilterBox(),childHeight(childHeight()),$("#"+t).css({zIndex:1}),updateTitleUI(getElement(element).selectedIndex)},mergeAllProp=function(){try{orginial=$.extend(!0,{},getElement(element))
for(var e in orginial)"function"!=typeof orginial[e]&&($this[e]=orginial[e])}catch(t){}$this.selectedText=getElement(element).selectedIndex>=0?getElement(element).options[getElement(element).selectedIndex].text:"",$this.version=msBeautify.version.msDropdown,$this.author=msBeautify.author},getDataAndUIByOption=function(e){if(null!=e&&void 0!==e){var t=getPostID("postChildID"),s=parseOption(e),n=$("#"+t+" li."+css_i.li+":eq("+e.index+")")
return{data:s,ui:n,option:e,index:e.index}}return null},getDataAndUI=function(){var e,t,s,n,i=getPostID("postChildID"),l=getElement(element)
if(-1==l.selectedIndex)e=null,t=null,s=null,n=-1
else if(t=$("#"+i+" li."+css.selected),t.length>1){for(var o=[],a=[],d=0;d<t.length;d++){var r=getIndex(t[d])
o.push(r),a.push(l.options[r])}e=o,s=a,n=o}else s=l.options[l.selectedIndex],e=parseOption(s),n=l.selectedIndex
return{data:e,ui:t,index:n,option:s}},updateTitleUI=function(e,t){var s=getPostID("postTitleID"),n={}
if(-1==e)n.text="&nbsp;",n.className="",n.description="",n.image=""
else if(void 0!==e){var i=getElement(element).options[e]
n=parseOption(i)}else n=t
$("#"+s).find("."+css.label).html(n.text),getElement(s).className=css.ddTitleText+" "+n.className,""!=n.description?$("#"+s).find("."+css.description).html(n.description).show():$("#"+s).find("."+css.description).html("").hide()
var l=$("#"+s).find("img")
l.length>0&&$(l).remove(),""!=n.image&&settings.showIcon&&(l=createElement("img",{src:n.image}),$("#"+s).prepend(l),""!=n.imagecss&&(l.className=n.imagecss+" "),""==n.description&&(l.className=l.className+css_i.fnone))},updateProp=function(e,t){$this[e]=t},updateUI=function(e,t,s){var n=getPostID("postChildID"),i=!1
switch(e){case"add":var l,o=createChild(t||getElement(element).options[s])
if(l=3==arguments.length?s:$("#"+n+" li."+css_i.li).length-1,0>l||!l)$("#"+n+" ul").append(o)
else{var a=$("#"+n+" li."+css_i.li)[l]
$(a).before(o)}removeChildEvents(),applyChildEvents(),null!=settings.on.add&&settings.on.add.apply(this,arguments)
break
case"remove":i=$($("#"+n+" li."+css_i.li)[s]).hasClass(css.selected),$("#"+n+" li."+css_i.li+":eq("+s+")").remove()
var d=$("#"+n+" li."+css.enabled)
if(1==i&&d.length>0){$(d[0]).addClass(css.selected)
var r=$("#"+n+" li."+css_i.li).index(d[0])
setValue(r)}0==d.length&&setValue(-1),$("#"+n+" li."+css_i.li).length<settings.visibleRows&&!isList&&childHeight(-1),null!=settings.on.remove&&settings.on.remove.apply(this,arguments)}}
this.act=function(){var e=arguments[0]
switch(Array.prototype.shift.call(arguments),e){case"add":$this.add.apply(this,arguments)
break
case"remove":$this.remove.apply(this,arguments)
break
default:try{getElement(element)[e].apply(getElement(element),arguments)}catch(t){}}},this.add=function(){var e,t,s,n,i,l=arguments[0]
"string"==typeof l?(e=l,t=e,opt=new Option(e,t)):(e=l.text||"",t=l.value||e,s=l.title||"",n=l.image||"",i=l.description||"",opt=new Option(e,t),$(opt).data("description",i),$(opt).data("image",n),$(opt).data("title",s)),arguments[0]=opt,getElement(element).add.apply(getElement(element),arguments),updateProp("children",getElement(element).children),updateProp("length",getElement(element).length),updateUI("add",opt,arguments[1])},this.remove=function(e){getElement(element).remove(e),updateProp("children",getElement(element).children),updateProp("length",getElement(element).length),updateUI("remove",void 0,e)},this.set=function(e,t){if(void 0===e||void 0===t)return!1
e=""+e
try{updateProp(e,t)}catch(s){}switch(e){case"size":getElement(element)[e]=t,0==t&&(getElement(element).multiple=!1),isList=getElement(element).size>1||1==getElement(element).multiple?!0:!1,fixedForList()
break
case"multiple":getElement(element)[e]=t,isList=getElement(element).size>1||1==getElement(element).multiple?!0:!1,isMultiple=getElement(element).multiple,fixedForList(),updateProp(e,t)
break
case"disabled":getElement(element)[e]=t,isDisabled=t,fixedForDisabled()
break
case"selectedIndex":case"value":"selectedIndex"==e&&isArray(t)===!0?($("#"+element+" option").prop("selected",!1),selectMutipleOptions(t,!0),selectUI_LI(t)):(getElement(element)[e]=t,selectUI_LI(getElement(element).selectedIndex),setValue(getElement(element).selectedIndex))
break
case"length":var n=getPostID("postChildID")
t<getElement(element).length&&(getElement(element)[e]=t,0==t?($("#"+n+" li."+css_i.li).remove(),setValue(-1)):($("#"+n+" li."+css_i.li+":gt("+(t-1)+")").remove(),0==$("#"+n+" li."+css.selected).length&&$("#"+n+" li."+css.enabled+":eq(0)").addClass(css.selected)),updateProp(e,t),updateProp("children",getElement(element).children))
break
case"id":break
default:try{getElement(element)[e]=t,updateProp(e,t)}catch(s){}}},this.get=function(e){return $this[e]||getElement(element)[e]},this.visible=function(e){var t=getPostID("postID")
if(e===!0)$("#"+t).show()
else{if(e!==!1)return"none"==$("#"+t).css("display")?!1:!0
$("#"+t).hide()}},this.debug=function(e){msBeautify.debug(e)},this.close=function(){close()},this.open=function(){open()},this.showRows=function(e){return void 0===e||0==e?!1:(settings.visibleRows=e,childHeight(childHeight()),void 0)},this.visibleRows=this.showRows,this.on=function(e,t){$("#"+element).on(e,t)},this.off=function(e,t){$("#"+element).off(e,t)},this.addMyEvent=this.on,this.getData=function(){return getDataAndUI()},this.namedItem=function(){var e=getElement(element).namedItem.apply(getElement(element),arguments)
return getDataAndUIByOption(e)},this.item=function(){var e=getElement(element).item.apply(getElement(element),arguments)
return getDataAndUIByOption(e)},this.setIndexByValue=function(e){this.set("value",e)},this.destroy=function(){getPostID("postElementHolder")
var e=getPostID("postID")
$("#"+e+", #"+e+" *").off(),getElement(element).tabIndex=getElement(e).tabIndex,$("#"+e).remove(),$("#"+element).parent().replaceWith($("#"+element)),$("#"+element).data("dd",null)},this.refresh=function(){setValue(getElement(element).selectedIndex)},init()}msBeautify={version:{msDropdown:"3.5.2"},author:"Marghoob Suleman",counter:20,debug:function(e){e!==!1?$(".ddOutOfVision").css({height:"auto",position:"relative"}):$(".ddOutOfVision").css({height:"0px",position:"absolute"})},oldDiv:"",create:function(e,t,s){s=s||"dropdown"
var n
switch(s.toLowerCase()){case"dropdown":case"select":n=$(e).msDropdown(t).data("dd")}return n}},$.msDropDown={},$.msDropdown={},$.extend(!0,$.msDropDown,msBeautify),$.extend(!0,$.msDropdown,msBeautify),void 0===$.fn.prop&&($.fn.prop=$.fn.attr),void 0===$.fn.on&&($.fn.on=$.fn.bind,$.fn.off=$.fn.unbind),$.expr[":"].Contains="function"==typeof $.expr.createPseudo?$.expr.createPseudo(function(e){return function(t){return $(t).text().toUpperCase().indexOf(e.toUpperCase())>=0}}):function(e,t,s){return $(e).text().toUpperCase().indexOf(s[3].toUpperCase())>=0},$.fn.extend({msDropDown:function(e){return this.each(function(){if(!$(this).data("dd")){var t=new dd(this,e)
$(this).data("dd",t)}})}}),$.fn.msDropdown=$.fn.msDropDown}(jQuery)

